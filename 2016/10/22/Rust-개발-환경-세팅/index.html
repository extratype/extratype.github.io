<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Rust 개발 환경 세팅 | extratype&#39;s blog | coding, math, etc.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="theme-color" content="#009688">
  
  
  <meta name="keywords" content="">
  <meta name="description" content="나의 Rust 개발 환경을 정리해서 적어둔다.

Windows 10 x64
MSYS2 + rustup
Rust stable x86_64 GNU ABI

MSYS2 설치하기리눅스스러운 환경을 구축하고 MinGW GCC 툴체인을 쓰기 위해서 MSYS2를 먼저 설치한다. Rust와 GCC를 함께 설치할 수도 있지만 문제가 있어 따로 설치한다. MSYS2 인스톨러">
<meta property="og:type" content="article">
<meta property="og:title" content="Rust 개발 환경 세팅">
<meta property="og:url" content="https://extratype.github.io/2016/10/22/Rust-개발-환경-세팅/index.html">
<meta property="og:site_name" content="extratype's blog">
<meta property="og:description" content="나의 Rust 개발 환경을 정리해서 적어둔다.

Windows 10 x64
MSYS2 + rustup
Rust stable x86_64 GNU ABI

MSYS2 설치하기리눅스스러운 환경을 구축하고 MinGW GCC 툴체인을 쓰기 위해서 MSYS2를 먼저 설치한다. Rust와 GCC를 함께 설치할 수도 있지만 문제가 있어 따로 설치한다. MSYS2 인스톨러">
<meta property="og:updated_time" content="2016-10-22T07:37:53.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Rust 개발 환경 세팅">
<meta name="twitter:description" content="나의 Rust 개발 환경을 정리해서 적어둔다.

Windows 10 x64
MSYS2 + rustup
Rust stable x86_64 GNU ABI

MSYS2 설치하기리눅스스러운 환경을 구축하고 MinGW GCC 툴체인을 쓰기 위해서 MSYS2를 먼저 설치한다. Rust와 GCC를 함께 설치할 수도 있지만 문제가 있어 따로 설치한다. MSYS2 인스톨러">
  
    <link rel="alternative" href="/atom.xml" title="extratype&#39;s blog" type="application/atom+xml">
  
  <meta name="summary" content="coding, math, etc.">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading" class="active"></div>

  <nav id="menu" class="hide" >
   <div class="inner flex-row-vertical">
  <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
      <i class="icon icon-lg icon-close"></i>
  </a>
  <div class="brand-wrap">
    <div class="brand">
      <a href="/" class="avatar"><img src="/img/logo.png"></a>
      <hgroup class="introduce">
        <h5 class="nickname">extratype</h5>
        <a href="mailto:extratype@gmail.com" title="extratype@gmail.com" class="mail">extratype@gmail.com</a>
      </hgroup>
    </div>
  </div>
  <div class="scroll-wrap flex-col">
    <ul class="nav">
      
          <li class="waves-block waves-effect">
            <a href="/"  >
              <i class="icon icon-lg icon-home"></i>
              Home
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="/archives"  >
              <i class="icon icon-lg icon-archives"></i>
              Archives
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="/categories"  >
              <i class="icon icon-lg icon-folder-open"></i>
              Categories
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="/tags"  >
              <i class="icon icon-lg icon-tags"></i>
              Tags
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="https://github.com/extratype" target="_blank" >
              <i class="icon icon-lg icon-github"></i>
              Github
            </a>
          </li>
      
    </ul>

    <footer class="footer">
  <p><a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;vertical-align:middle;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAAllBMVEUAAAD///+rsapERER3d3eIiIjMzMzu7u4iIiKUmZO6v7rKzsoODg4RERFVVVUNDQ0NDg0PEA8zMzNLTEtbXltmZmZydnF9gn2AgICPkI+ZmZmqqqq7u7vFxsXIzMgNDQwZGRkgICAhISEkJSMnKCcuMC4xMzE5Ozk7PTtBQkFCQkJDQ0Nna2eGhoaHh4ezuLLGysbd3d1wVGpAAAAA4UlEQVR42q2T1xqCMAyFk7QsBQeKA9x7j/d/OSm22CpX0nzcpA1/T05aAOuBVkMAScQFHLnEwoCo2f1TnQIGoVMewjZEjVFN4GH1Ue1Cn2jWqwfsOOj6wDwGvotsl/c8lv7KIq1eLOsT0HMFHMIE/RZyHnlphryT9zyV+8WH5e8yQw3wnQvgAFxPTKUVi555SHR/lOfLMgVTeDlSfN+TaoUsiTyeIm+bCkHvCA2FUKG48LDtYBZBknsYP/G8NTw0gaaHyuQf4H5pecrB/FYCT2sL9zAfy1Xyjou6L8X2W7YcLyBZCRtnq/zfAAAAAElFTkSuQmCC" /></a></p>
  <p>extratype&#39;s blog &copy; 2016</p>
  <p>Generator <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
  <a href="https://github.com/extratype/hexo-theme-indigo" target="_blank">indigo</a></p>
  <a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-2x icon-rss-square"></i></a>
</footer>

  </div>
</div>

  </nav>
  <main id="main">
    <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Rust 개발 환경 세팅</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input " autocomplete="off" placeholder="Keyword">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-share">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header">
  <div class="container">
    <h1 class="author">Rust 개발 환경 세팅</h1>
    <h5 class="subtitle">
        
            <time datetime="2016-10-22T03:47:41.000Z" itemprop="datePublished" class="page-time">
  2016-10-22
</time>


	<a class="article-category-link" href="/categories/coding/"><div class='article-category-separator'>/</div>coding</a><a class="article-category-link" href="/categories/coding/Rust/"><div class='article-category-separator'>/</div>Rust</a>

        
    </h5>
  </div>
</header>

    <div class="container body-wrap">
      <article id="post-Rust-개발-환경-세팅" 
  class="article article-type-post" itemprop="blogPost">
    <div class="post-body">
        <aside class="post-widget" id="post-widget">

            

            
            <nav class="post-toc-wrap" id="post-toc">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#MSYS2-설치하기"><span class="post-toc-number">1.</span> <span class="post-toc-text">MSYS2 설치하기</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Rust-설치하기"><span class="post-toc-number">2.</span> <span class="post-toc-text">Rust 설치하기</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#IDE-선택하기"><span class="post-toc-number">3.</span> <span class="post-toc-text">IDE 선택하기</span></a></li></ol>
            </nav>
            
        </aside>

        <div class="post-main">

            <div class="post-content" id="post-content" itemprop="postContent">
            <p>나의 Rust 개발 환경을 정리해서 적어둔다.</p>
<ul>
<li>Windows 10 x64</li>
<li>MSYS2 + rustup</li>
<li>Rust stable x86_64 GNU ABI</li>
</ul>
<h2 id="MSYS2-설치하기"><a href="#MSYS2-설치하기" class="headerlink" title="MSYS2 설치하기"></a>MSYS2 설치하기</h2><p>리눅스스러운 환경을 구축하고 MinGW GCC 툴체인을 쓰기 위해서 <a href="https://msys2.github.io" target="_blank" rel="external">MSYS2</a>를 먼저 설치한다. Rust와 GCC를 함께 설치할 수도 있지만 <a href="https://github.com/rust-lang/rust/issues/19519#issuecomment-246117842" target="_blank" rel="external">문제</a>가 있어 따로 설치한다. MSYS2 인스톨러를 실행하고 난 다음엔 사이트에 나와있는 대로 업그레이드를 해주도록 하자.</p>
<p><code>msys2_shell.cmd</code> 스크립트를 돌려서 MSYS2나 MinGW-w64 환경 쉘을 띄울 수 있다. <code>-where</code> 옵션을 주면 작업 디렉토리를 지정할 수 있다. 다른 옵션은 스크립트 파일을 참고하기 바란다. 탐색기의 컨텍스트 메뉴에 MSYS2 쉘을 추가하려면 <a href="https://github.com/njzhangyifei/msys2-mingw-shortcut-menus" target="_blank" rel="external">여기</a>를 참고.</p>
<p>MSYS2 환경은 윈도우와 독립된 POSIX 환경처럼 보이는데, 실제로는 MSYS2 툴체인으로 컴파일된(MSYS2 DLL을 사용하는) 프로그램에 한해서 그러하다. MinGW-w64 툴체인으로 컴파일된 프로그램들은 MSYS2 DLL을 거치지 않고 native로 동작한다. 이런 이유로 MSYS2를 분리된 POSIX 개발 환경으로 꾸밀 수는 없다.</p>
<p>나는 아예 윈도우와 MSYS2 환경을 통합해서 사용하기로 결정했다. <code>PATH</code> 환경 변수에 <code>C:\msys64\mingw64\bin</code>과 <code>C:\msys64\usr\bin</code>을 순서대로 추가한다. 단, 충돌을 방지하기 위해 <code>%SystemRoot%\system32</code> 보다 아래에 둔다. MSYS2 쉘에서 다른 윈도우용 툴들을 쓰기 위해 <code>msys2_shell.cmd</code>에서 <code>MSYS2_PATH_TYPE=inherit</code>를 설정한다. 이렇게 하면 MSYS2 쉘에서는 MSYS2 바이너리들을 <code>system32</code> 바이너리보다 우선하되 다른 툴들도 사용할 수 있게 된다.</p>
<h2 id="Rust-설치하기"><a href="#Rust-설치하기" class="headerlink" title="Rust 설치하기"></a>Rust 설치하기</h2><p>인스톨러보다 Rust 툴체인 관리가 편해지는 <a href="https://www.rustup.rs/" target="_blank" rel="external">rustup</a>을 권장한다. 인스톨러로 Rust를 설치해도 되는데 MSYS2와 같이 쓰려면 ‘Linker and platform libraries’ 옵션을 해제하고 설치하면 된다. rustup으로 Rust를 설치하면 최소한의 MinGW 툴체인이 같이 설치되며 제거할 수 있는 옵션이 아직 없다. 임시방편으로 이렇게 제거하면 된다.</p>
<ol>
<li>MinGW 툴체인이 설치된 디렉토리(예: <code>%USERPROFILE%\.multirust\toolchains\stable-x86_64-pc-windows-gnu\lib\rustlib\x86_64-pc-windows-gnu</code>)로 이동한다.</li>
<li><code>bin</code> 폴더의 이름을 <code>bin~</code>로 바꾼다.</li>
<li><code>lib~</code> 폴더를 만들고 <code>lib</code> 폴더 안의 <code>*.a</code> 파일들을 <code>lib~</code>로 모두 옮긴다.</li>
</ol>
<p>나중에 Rust 툴체인을 삭제하거나 업그레이드할 일이 생기면 이렇게 백업해둔 파일들을 복원한 다음 rustup을 실행하면 된다.</p>
<p><a href="https://github.com/rust-lang/rust-wiki-backup/blob/master/Using-Rust-on-Windows.md" target="_blank" rel="external">여기</a>를 참고하여 MinGW 툴체인을 설치한다.</p>
<h2 id="IDE-선택하기"><a href="#IDE-선택하기" class="headerlink" title="IDE 선택하기"></a>IDE 선택하기</h2><p><a href="https://areweideyet.com/" target="_blank" rel="external">여기</a>에서 IDE들을 비교해볼 수 있다. 나는 VS Code와 Eclipse를 선택했다. VS Code는 outline 창이 없다(Go to Symbol이나 Fold All로 흉내는 낼 수 있다)는 점만 빼면 가장 쓸만했다. 디버깅도 되는데 멀티스레드를 지원하지 않는 문제가 있다. 반대로 RustDT는 outline 기능도 있고 멀티스레드 디버깅도 지원하지만 매개변수 툴팁이 안 나오는 등 편집기가 마음에 들지 않았다.</p>
<p>다른 편집기도 조금씩 써보기는 했다.</p>
<ul>
<li>Atom은 UI가 VS Code만큼 깔끔하지 않았다.</li>
<li>IntelliJ는 racer에 기반을 두지 않고 자체적으로 자동 완성을 지원하고, outline 기능도 있다. 매개변수 툴팁이 없고 디버깅도 지원하지 않는다.</li>
<li>Visual Studio는 cargo로 빌드가 되지 않았다(지금은 되는 듯 하다).</li>
</ul>
<p>VS Code는 이렇게 세팅했다.</p>
<ol>
<li>Rust 소스 코드 다운로드: <code>rustup component add rust-src</code></li>
<li>RustyCode, Native Debug, TOML Language Support 확장 설치</li>
<li>rustup 설치시 PATH를 등록하지 않았다면(예: <code>%USERPROFILE%\.cargo\bin</code>) <code>rust.cargoHomePath</code> 설정</li>
</ol>
<p>Eclipse는 이렇게 세팅했다.</p>
<ol>
<li>Eclipse Java Neon 설치</li>
<li>CDT 설치, Marketplace에서 RustDT 설치</li>
<li>설정에서 각종 경로 지정. Download 버튼으로 쉽게 설치할 수는 있는데 기본 <code>bin</code> 폴더가 아니라 <code>RustDT</code> 폴더에 설치된다. 나는 <a href="https://github.com/RustDT/Rainicorn" target="_blank" rel="external">Rainicorn</a>까지 <code>bin</code> 폴더에 직접 설치했다.</li>
</ol>
<p>Racer는 릴리즈된 버전이 오래되었으니 Git 저장소에서 설치하는 것을 추천한다:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cargo install --git https://github.com/phildawes/racer</div></pre></td></tr></table></figure></p>
<p>디버깅은 <code>gdb</code>로 이루어진다. Rust 소스 코드에 포함된 pretty printer를 쓰면 변수를 깔끔하게 볼 수 있다. 단 디버깅이 느려지거나 가끔 멈추는 문제가 있다. Pretty printer를 쓰려면 우선 <code>.gdbinit</code> 파일을 만든다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">python</div><div class="line">print(<span class="string">'Loading Rust pretty-printers...'</span>)</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> subprocess </div><div class="line">sys.path.append(os.path.join(subprocess.check_output([<span class="string">'rustc'</span>, <span class="string">'--print=sysroot'</span>]).decode(sys.stdout.encoding).strip(), <span class="string">'lib'</span>, <span class="string">'rustlib'</span>, <span class="string">'src'</span>, <span class="string">'rust'</span>, <span class="string">'src'</span>, <span class="string">'etc'</span>))</div><div class="line"><span class="keyword">import</span> gdb_rust_pretty_printing</div><div class="line">gdb_rust_pretty_printing.register_printers(gdb)</div><div class="line">end</div></pre></td></tr></table></figure>
<p>VS Code의 경우 <code>launch.json</code>을 수정한다. (예시)<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</div><div class="line">    <span class="attr">"configurations"</span>: [&#123;</div><div class="line">        <span class="attr">"name"</span>: <span class="string">"Debug"</span>,</div><div class="line">        <span class="attr">"type"</span>: <span class="string">"gdb"</span>,</div><div class="line">        <span class="attr">"request"</span>: <span class="string">"launch"</span>,</div><div class="line">        <span class="attr">"autorun"</span>: [</div><div class="line">            <span class="string">"source .gdbinit"</span></div><div class="line">        ],</div><div class="line">        <span class="attr">"target"</span>: <span class="string">"./target/debug/hello_rust.exe"</span>,</div><div class="line">        <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceRoot&#125;"</span></div><div class="line">    &#125;]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Eclipse에서는 Debug Configuration에서 Rust Application을 만들면 된다. 기본적으로 <code>.gdbinit</code>를 실행하게 되어 있다.</p>


            
            
            <blockquote>
                <p>
                Link:
                <a href="https://extratype.github.io/2016/10/22/Rust-개발-환경-세팅/" target="_blank" rel="external">https://extratype.github.io/2016/10/22/Rust-개발-환경-세팅/</a>
                </p>
                <footer><cite><a href="https://extratype.github.io">@extratype's blog</a></cite></footer>
            </blockquote>
            </div>

            <div class="post-footer flex-row flex-middle">
                
            </div>

            
<nav class="post-nav">
  

  
    <div class="waves-block waves-effect next fr">
      <a href="/2016/10/16/MSYS2-Git-사용하기/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">MSYS2 Git 사용하기</h4>
      </a>
    </div>
  
</nav>


            
            



        </div>


    </div>
</article>
    </div>
  </main>
<div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>

<script>
var BLOG_SHARE = {
    title: "Rust 개발 환경 세팅",
    pic: "/img/logo.png",
    summary: document.getElementsByName('summary')[0].content,
    url: "https://extratype.github.io/2016/10/22/Rust-%EA%B0%9C%EB%B0%9C-%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85/index.html"
};
</script>
<div class="global-share" id="global-share">
    
    <ul class="reset share-icons">
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title="Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title="Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title="QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>




<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script src="/js/main.js"></script>



<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<script type="text/template" id="search-tpl">
<li class="item">
    <a href="/{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <time class="time">{date}</time>
            <div class="categories ellipsis">
                {categories}
            </div>
            <div class="tags ellipsis">
                {tags}
            </div>
        </div>
    </a>
</li>
</script>

<script src="/js/search.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->









</body>
</html>
